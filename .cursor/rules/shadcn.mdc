---
description: "Vite + React + TypeScript環境でのShadcn UI正しいセットアップ方法"
---

# 🧩 Shadcn UI + Vite セットアップガイド

**説明**: Vite + React + TypeScript環境でのShadcn UI正しいセットアップ方法。

## 前提条件
- Vite + React + TypeScript プロジェクトが作成済み
- Tailwind CSS v4 がセットアップ済み（@tailwindcss/viteプラグイン使用）

## 必須手順

### 1. TypeScript設定の修正

#### a) メインtsconfig.json
```json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

#### b) tsconfig.app.json にpath mapping追加
```json
{
  "compilerOptions": {
    // ... 既存の設定
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

#### c) tsconfig.node.json にNode.js型定義を追加
```json
{
  "compilerOptions": {
    // ... 既存の設定
    "types": ["node"]
  }
}
```

### 2. 必要パッケージのインストール
```bash
npm install --save-dev @types/node
```

### 3. Vite設定の修正 (vite.config.ts)
```ts
import path from "path"
import tailwindcss from "@tailwindcss/vite"
import react from "@vitejs/plugin-react"
import { defineConfig } from "vite"

export default defineConfig({
  plugins: [react(), tailwindcss()],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
})
```

### 4. Shadcn UI初期化
```bash
npx shadcn@latest init
```

## よくあるエラーと解決策

### エラー: "No import alias found"
- **原因**: shadcnがtsconfig.jsonでpath mappingを見つけられない
- **解決**: メインのtsconfig.jsonにpaths設定を追加

### エラー: "__dirname is not defined"
- **原因**: ESModuleで__dirnameが使用できない
- **解決**: tsconfig.node.jsonに`"types": ["node"]`を追加

### エラー: "Cannot find module 'path'"
- **原因**: Node.jsの型定義が不足
- **解決**: `npm install --save-dev @types/node`

## 設定確認コマンド
```bash
# 型エラーをチェック
npx tsc --noEmit

# shadcnの初期化
npx shadcn@latest init

# コンポーネント追加例
npx shadcn@latest add button
```

## 注意点
- **重要**: メインのtsconfig.jsonにもpaths設定が必要（参照するだけではshadcnが認識しない）
- Tailwind CSS v4を使用する場合、従来のconfig.jsは不要
- @tailwindcss/viteプラグインを使用すること

## 参考リンク
- [Shadcn UI Vite Installation](https://ui.shadcn.com/docs/installation/vite)
- [Vite Path Alias Configuration](https://vitejs.dev/config/shared-options.html#resolve-alias)